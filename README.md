# 数据库管理工具

这是一个简单的Web服务应用，用于管理股票和指数数据库，提供三个主要功能：

1. **更新数据**：更新股票和指数的最新数据
2. **重建数据库**：清空并重新下载所有数据
3. **更新指数相关度**：计算股票与指数的相关度

## 安装依赖

确保已安装Python 3.7+，然后安装所需依赖：

```bash
pip install flask sqlalchemy pandas akshare python-dotenv
```

## 启动服务

在项目根目录下运行：

```bash
python server.py
```

服务将在 http://localhost:5000 启动，可以通过浏览器访问。

## 使用说明

### 更新数据

点击「更新数据」按钮，系统将自动获取最新的股票和指数数据，并更新到数据库中。此操作仅更新最近的数据，不会影响历史数据。

### 重建数据库

点击「重建数据库」按钮，系统将清空现有数据库，并重新下载所有股票和指数数据。此操作适用于数据库损坏或需要完全重新初始化的情况。

**注意**：此操作会删除所有现有数据，请谨慎使用。

### 更新指数相关度

点击「更新指数相关度」按钮，系统将计算每只股票与各指数的相关度，并更新到数据库中。此功能有助于分析股票与指数的关联性。

## 状态监控

页面底部的状态区域会显示各任务的当前状态：

- **空闲**：任务未运行
- **运行中**：任务正在执行
- **成功**：任务已成功完成
- **错误**：任务执行出错

任务运行期间，所有按钮将被禁用，以防止多个任务同时运行。

## 日志

服务运行日志保存在 `logs` 目录下，可以查看详细的执行记录和错误信息。